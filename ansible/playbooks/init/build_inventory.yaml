- name: create inventory file
  shell: |
    echo "" > ../inventory/inventory.gcp.yml
    tee -a ../inventory/inventory.gcp.yml << EOF
    plugin: gcp_compute
    projects:
      - sysadmcephcluster
    region: europe-west4
    hostnames:
      - public_ip
      - private_ip
    groups:
      bastion: "'bastion' in name"
      osd: "'osd' in name"
      manager: "'manager' in name"
      monitor: "'monitor' in name"
    auth_kind: serviceaccount
    service_account_file: {{ service_account_file }}
    EOF